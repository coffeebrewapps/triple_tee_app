import{_ as S,j as I,u as k,r as m,c,o as D,a as v,b as N,h as B,t as w,f as r,e as E,d as x}from"./index-7f6b454a.js";import{u as P,a as U}from"./dataAccess-5c645c6d.js";import{T as V}from"./TemplateEditor-7d1e9c58.js";import"./TabContainer-47d05ef3.js";const R={class:"page-container"},M={class:"heading"},$={__name:"PreviewTemplate",props:{disabled:{type:Boolean,default:!1}},setup(y){const f=I(),T=P(),o=U(),d=k(),s=m({}),p=Object.assign({},f.currentRoute.value),i=c(()=>p.params.id),a=c(()=>p.params.templateType),b=c(()=>`${T.baseUrl}/api/${a.value}`),e=m(),g=c(()=>e.value?a.value==="invoice_templates"?`Invoice Template: ${e.value.name}`:`Receipt Template: ${e.value.name}`:"");async function h(t){const l=Object.assign({},e.value,{contentMarkup:t});await o.update(a.value,i.value,l).then(u=>{e.value=u,n("Updated markup successfully!")}).catch(u=>{n("Error updating markup!")})}async function _(t){const l=Object.assign({},e.value,{contentStyles:t});await o.update(a.value,i.value,l).then(u=>{e.value=u,n("Updated styles successfully!")}).catch(u=>{n("Error updating styles !")})}function C(t){s.value=t}function n(t){d.show(t),setTimeout(A,5e3)}function A(){d.hide()}async function Z(){await o.view(a.value,i.value,{}).then(t=>{e.value=t}).catch(t=>{n("Error loading template!"),console.log(t)})}return D(async()=>{s.value={invoice:{invoiceNumber:2,invoiceDate:"2023-05-26T14:06:15.686Z",dueDate:"2023-06-25T14:06:15.686Z",totalAmount:574.98},invoiceLines:[{id:"1",description:"Requirements gathering",unit:"hour",unitCost:100,unitValue:2.06,subtotal:205.93,invoiceId:"1",createdAt:"2023-05-26T14:07:10.051Z",updatedAt:"2023-05-26T14:07:10.051Z"},{id:"2",description:"Implementation",unit:"hour",unitCost:85,unitValue:4.17,subtotal:354.05,invoiceId:"1",createdAt:"2023-05-26T14:07:10.055Z",updatedAt:"2023-05-26T14:07:10.055Z"},{id:"3",description:"GST",unit:"fixed",unitCost:15,unitValue:1,subtotal:15,invoiceId:"1",createdAt:"2023-05-26T14:07:10.057Z",updatedAt:"2023-05-26T14:07:10.057Z"}],invoiceConfig:{id:"1",invoiceCycleDurationValue:1,invoiceCycleDurationUnit:"month",dueDateCycleValue:30,dueDateCycleUnit:"day",paymentTerms:"Payment due to account 395-17573-542",tags:["1"],customFields:{},invoiceNumberSequenceId:"1",billingContactId:"1",invoiceTemplateId:"1",currencyId:"1",createdAt:"2023-05-26T06:32:33.830Z",updatedAt:"2023-05-26T06:32:33.830Z"},invoiceNumberSequence:{id:"1",name:"Company ABC Invoice Sequence",startingNumber:1,lastUsedNumber:1,incrementStep:1,prefix:"INV",suffix:"ABC",createdAt:"2023-05-26T06:30:04.445Z",updatedAt:"2023-05-26T06:30:04.445Z"},billingContact:{id:"1",name:"Company ABC",accountNumber:null,addressLine1:null,addressLine2:null,addressLine3:null,city:null,state:null,country:"SGP",postcode:null,contactNumber1:null,contactNumber2:null,contactNumber3:null,contactPerson1:null,contactPerson2:null,contactPerson3:null,contactEmail1:null,contactEmail2:null,contactEmail3:null,url1:null,url2:null,url3:null,logo:null,customFields:null,createdAt:"2023-05-26T06:30:24.570Z",updatedAt:"2023-05-26T06:30:24.570Z"},currency:{id:"1",code:"USD",symbol:"$",exchangeRate:1,effectiveStart:"2012-12-31T16:00:00.000Z",effectiveEnd:null,createdAt:"2023-05-26T06:29:49.052Z",updatedAt:"2023-05-26T06:29:49.052Z"}},await Z()}),(t,l)=>(v(),N("div",R,[B("h2",M,w(r(g)),1),e.value?(v(),E(V,{key:0,"template-type":r(a),"templates-url":r(b),id:e.value.id,"content-markup":e.value.contentMarkup,"content-styles":e.value.contentStyles,data:s.value,disabled:y.disabled,onContentMarkupChange:h,onContentStylesChange:_,onDataChange:C},null,8,["template-type","templates-url","id","content-markup","content-styles","data","disabled"])):x("",!0)]))}},F=S($,[["__scopeId","data-v-2b0eb8d8"]]);export{F as default};
