import{_ as U,n as z,b as G,q as J,a as Q,c as d,r as u,o as W,d as t,e as s,j as p,t as y,h as a,g as h,v as X,f as r,x as b,F as B,y as S,k as Y}from"./index-b3128bd9.js";import{a as Z,u as ee}from"./Form-77967d6a.js";import{T as ne}from"./TabContainer-8746c156.js";import ae from"./InvoiceLines-98e3f3d6.js";import{T as te}from"./TemplateEditor-4d9b7e97.js";import{u as oe}from"./utils-47359872.js";import"./errors-a6177d44.js";import"./DataPage-726cf7ba.js";const ce={class:"page-container"},se={class:"heading"},ie={class:"details-container"},le={class:"data-row"},ue={class:"data-field"},re={class:"field-label"},ve={class:"field-value"},de={key:0},pe={key:1},me={__name:"ViewInvoice",setup(_e){const x=z(),f=G(),{isEmpty:g,notEmpty:I}=Z(),q=J(),k=Q(),w=Object.assign({},x.currentRoute.value),L=d(()=>w.params.id),F=d(()=>w.query.contactId),{fieldsLayout:j,generateDataFields:O}=oe(),T=d(()=>O(F.value)),{inputLabel:R,inputValue:A,includeKeys:C}=ee(T.value),e=u(),m=u(),o=u(),i=u(),E=u(),M=d(()=>e.value?`Invoice: ${e.value.invoiceNumber}`:"Loading Invoice...");async function V(){e.value=null;const n={include:C.value};await f.view("invoices",L.value,n).then(l=>{e.value=l,v("Loaded invoice successfully!")}).catch(l=>{console.error(l),v("Error loading invoice!")})}async function $(){m.value=null,o.value=null,i.value=null,f.view("invoices",e.value.id,{},{path:"template_data"}).then(n=>{m.value=n.invoiceLines,o.value=n.invoiceConfig,i.value=o.value.includes.invoiceTemplateId[o.value.invoiceTemplateId];const l=o.value.includes.invoiceNumberSequenceId[o.value.invoiceNumberSequenceId],_=o.value.includes.currencyId[o.value.currencyId],c=n.billingContact,N=c.includes.country[c.country];E.value={invoice:e.value,invoiceLines:m.value,invoiceConfig:o.value,invoiceNumberSequence:l,billingContact:Object.assign({},c,{country:N.countryName}),currency:_,country:N},v("Loaded template data successfully!")}).catch(n=>{console.error(n),v("Error loading template data!")})}function v(n){k.show(n),setTimeout(H,5e3)}function H(){k.hide()}const D=[{label:"Details",onchange:V},{label:"Invoice Lines",onchange:K},{label:"View Invoice PDF",onchange:$}];async function K(){q.emitEvent("loadData",{dataType:"Invoice Lines"})}function P(n){D[n].onchange()}return W(async()=>{await V()}),(n,l)=>(t(),s("div",ce,[p("h2",se,y(a(M)),1),e.value?r("",!0):(t(),h(a(X),{key:0})),e.value?(t(),h(ne,{key:1,tabs:D,onTabChange:P},{"tab-0":b(()=>[p("div",ie,[(t(!0),s(B,null,S(a(j),_=>(t(),s("div",le,[(t(!0),s(B,null,S(Object.keys(_),c=>(t(),s("div",ue,[p("div",re,y(a(R)(c)),1),p("div",ve,[a(I)(e.value)&&a(I)(e.value[c])?(t(),s("span",de,y(a(A)(c,e.value,a(C),a(T))),1)):r("",!0),a(g)(e.value)||a(g)(e.value[c])?(t(),s("span",pe," --- no value --- ")):r("",!0)])]))),256))]))),256))])]),"tab-1":b(()=>[Y(ae,{"invoice-id":a(L)},null,8,["invoice-id"])]),"tab-2":b(()=>[i.value?(t(),h(te,{key:0,"template-type":"invoice_templates",id:i.value.id,"content-markup":i.value.contentMarkup,"content-styles":i.value.contentStyles,data:E.value,disabled:!0},null,8,["id","content-markup","content-styles","data"])):r("",!0)]),_:1})):r("",!0)]))}},Le=U(me,[["__scopeId","data-v-90aeb475"]]);export{Le as default};
