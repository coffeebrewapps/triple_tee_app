import{_ as U,n as z,a as G,q as J,u as Q,c as p,r as u,o as W,b as t,d as o,i as b,t as h,g as n,f as m,s as X,e as s,v as I,F as S,x as B}from"./index-5d3b5062.js";import{u as Y}from"./input-f6942672.js";import{u as Z}from"./validations-9a1af222.js";import{u as ee}from"./utils-7b0831a9.js";import{T as ae}from"./TabContainer-f41a1449.js";import te from"./InvoiceLines-80d12f25.js";import{T as ne}from"./TemplateEditor-e7bcc1e5.js";import"./DataPage-c76c2d4f.js";import"./errors-53bc63a8.js";import"./DataForm-9f3a2ac9.js";const oe={class:"page-container"},ce={class:"heading"},se={key:0,class:"details-container"},ie={class:"field-label"},le={class:"field-value"},ue={key:0},re={key:1},ve={__name:"ViewInvoice",setup(de){const F=z(),k=G(),{isEmpty:w,notEmpty:L}=Z(),q=J(),{flashMessage:v}=Q(),T=Object.assign({},F.currentRoute.value),C=p(()=>T.params.id),j=p(()=>T.query.contactId),{fieldsLayout:M,generateDataFields:O}=ee(),D=p(()=>O(j.value)),{inputLabel:R,inputValue:A,includeKeys:E}=Y(D.value),a=u(),_=u(),y=u(),i=u(),V=u(),$=p(()=>a.value?`Invoice: ${a.value.invoiceNumber}`:"Loading Invoice...");async function x(){a.value=null;const e={include:E.value};await k.view("invoices",C.value,e).then(l=>{a.value=l,v("Loaded invoice successfully!")}).catch(l=>{console.error(l),v("Error loading invoice!")})}async function H(){_.value=null,y.value=null,i.value=null,k.view("invoices",a.value.id,{},{path:"template_data"}).then(e=>{_.value=e.invoiceLines,y.value=e.invoiceConfig,i.value=e.invoiceTemplate;const l=e.invoiceNumberSequence,g=e.currency,f=e.billingContact,c=e.country,d=e.logo;V.value={invoice:a.value,invoiceLines:_.value,invoiceConfig:y.value,invoiceNumberSequence:l,billingContact:Object.assign({},f,{country:c.countryName,logo:d.rawData}),currency:g,country:c,logo:d},v("Loaded template data successfully!")}).catch(e=>{console.error(e),v("Error loading template data!")})}const r=u(0),N=[{label:"Details",onchange:x},{label:"Invoice Lines",onchange:K},{label:"View Invoice PDF",onchange:H}];async function K(){q.emitEvent("loadData",{dataType:"Invoice Lines"})}async function P(e){await N[e].onchange(),r.value=e}return W(async()=>{await x()}),(e,l)=>(t(),o("div",oe,[b("h2",ce,h(n($)),1),a.value?s("",!0):(t(),m(n(X),{key:0})),a.value?(t(),m(ae,{key:1,"selected-tab":r.value,tabs:N,onTabChange:P},{"tab-0":I(()=>[r.value===0?(t(),o("div",se,[(t(!0),o(S,null,B(n(M),(g,f)=>(t(),o("div",{key:f,class:"data-row"},[(t(!0),o(S,null,B(Object.keys(g),(c,d)=>(t(),o("div",{key:d,class:"data-field"},[b("div",ie,h(n(R)(c)),1),b("div",le,[n(L)(a.value)&&n(L)(a.value[c])?(t(),o("span",ue,h(n(A)(c,a.value,n(E),n(D))),1)):s("",!0),n(w)(a.value)||n(w)(a.value[c])?(t(),o("span",re," --- no value --- ")):s("",!0)])]))),128))]))),128))])):s("",!0)]),"tab-1":I(()=>[r.value===1?(t(),m(te,{key:0,"invoice-id":n(C)},null,8,["invoice-id"])):s("",!0)]),"tab-2":I(()=>[r.value===2&&i.value?(t(),m(ne,{key:0,id:i.value.id,"template-type":"invoice_templates","content-markup":i.value.contentMarkup,"content-styles":i.value.contentStyles,data:V.value,disabled:!0},null,8,["id","content-markup","content-styles","data"])):s("",!0)]),_:1},8,["selected-tab"])):s("",!0)]))}},we=U(ve,[["__scopeId","data-v-36ddd4df"]]);export{we as default};
