import{_ as z,m as G,a as J,n as Q,u as W,c as v,r as l,o as X,b as t,d as c,i as d,t as f,g as n,f as g,q as Y,e as u,v as h,F as N,x,j as Z}from"./index-456a89cc.js";import{a as ee,u as ae}from"./input-701303c2.js";import{u as ne}from"./utils-a8a1fa8d.js";import{T as te}from"./TabContainer-65d2b41a.js";import oe from"./InvoiceLines-7b936715.js";import{T as ce}from"./TemplateEditor-4ab264f1.js";import"./DataPage-58fc72df.js";import"./errors-a6177d44.js";import"./DataForm-c9afdb67.js";const ie={class:"page-container"},se={class:"heading"},le={class:"details-container"},ue={class:"field-label"},re={class:"field-value"},ve={key:0},de={key:1},pe={__name:"ViewInvoice",setup(me){const S=G(),b=J(),{isEmpty:I,notEmpty:k}=ee(),F=Q(),w=W(),L=Object.assign({},S.currentRoute.value),T=v(()=>L.params.id),j=v(()=>L.query.contactId),{fieldsLayout:q,generateDataFields:O}=ne(),C=v(()=>O(j.value)),{inputLabel:R,inputValue:A,includeKeys:E}=ae(C.value),a=l(),p=l(),m=l(),i=l(),V=l(),M=v(()=>a.value?`Invoice: ${a.value.invoiceNumber}`:"Loading Invoice...");async function D(){a.value=null;const e={include:E.value};await b.view("invoices",T.value,e).then(s=>{a.value=s,r("Loaded invoice successfully!")}).catch(s=>{console.error(s),r("Error loading invoice!")})}async function $(){p.value=null,m.value=null,i.value=null,b.view("invoices",a.value.id,{},{path:"template_data"}).then(e=>{p.value=e.invoiceLines,m.value=e.invoiceConfig,i.value=e.invoiceTemplate;const s=e.invoiceNumberSequence,_=e.currency,y=e.billingContact,o=e.country;V.value={invoice:a.value,invoiceLines:p.value,invoiceConfig:m.value,invoiceNumberSequence:s,billingContact:Object.assign({},y,{country:o.countryName}),currency:_,country:o},r("Loaded template data successfully!")}).catch(e=>{console.error(e),r("Error loading template data!")})}function r(e){w.show(e),setTimeout(H,5e3)}function H(){w.hide()}const B=[{label:"Details",onchange:D},{label:"Invoice Lines",onchange:K},{label:"View Invoice PDF",onchange:$}];async function K(){F.emitEvent("loadData",{dataType:"Invoice Lines"})}function P(e){B[e].onchange()}return X(async()=>{await D()}),(e,s)=>(t(),c("div",ie,[d("h2",se,f(n(M)),1),a.value?u("",!0):(t(),g(n(Y),{key:0})),a.value?(t(),g(te,{key:1,tabs:B,onTabChange:P},{"tab-0":h(()=>[d("div",le,[(t(!0),c(N,null,x(n(q),(_,y)=>(t(),c("div",{key:y,class:"data-row"},[(t(!0),c(N,null,x(Object.keys(_),(o,U)=>(t(),c("div",{key:U,class:"data-field"},[d("div",ue,f(n(R)(o)),1),d("div",re,[n(k)(a.value)&&n(k)(a.value[o])?(t(),c("span",ve,f(n(A)(o,a.value,n(E),n(C))),1)):u("",!0),n(I)(a.value)||n(I)(a.value[o])?(t(),c("span",de," --- no value --- ")):u("",!0)])]))),128))]))),128))])]),"tab-1":h(()=>[Z(oe,{"invoice-id":n(T)},null,8,["invoice-id"])]),"tab-2":h(()=>[i.value?(t(),g(ce,{key:0,id:i.value.id,"template-type":"invoice_templates","content-markup":i.value.contentMarkup,"content-styles":i.value.contentStyles,data:V.value,disabled:!0},null,8,["id","content-markup","content-styles","data"])):u("",!0)]),_:1})):u("",!0)]))}},Le=z(pe,[["__scopeId","data-v-842a3af7"]]);export{Le as default};
