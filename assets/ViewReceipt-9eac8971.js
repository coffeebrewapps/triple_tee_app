import{_ as P,m as U,a as $,u as z,c as r,r as _,o as G,b as n,d as s,i as d,t as m,g as a,f as y,q as J,e as i,v as B,F as D,x as E}from"./index-4d73f140.js";import{a as Q,u as W}from"./input-7f33c7c3.js";import{u as X}from"./utils-9501a749.js";import{T as Y}from"./TabContainer-dd359527.js";import{T as Z}from"./TemplateEditor-a63c0165.js";const ee={class:"page-container"},te={class:"heading"},ae={class:"details-container"},ne={class:"field-label"},se={class:"field-value"},ce={key:0},oe={key:1},re={__name:"ViewReceipt",setup(ie){const I=U(),h=$(),{isEmpty:b,notEmpty:g}=Q(),f=z(),p=Object.assign({},I.currentRoute.value),x=r(()=>p.params.id),C=r(()=>p.query.invoiceId),L=r(()=>p.query.contactId),{fieldsLayout:F,generateDataFields:j}=X(),k=r(()=>j(C.value,L.value)),{inputLabel:N,inputValue:O,includeKeys:w}=W(k.value),t=_(),c=_(),R=_(),q=r(()=>t.value?`Receipt: ${t.value.receiptNumber}`:"Loading Receipt...");async function T(){t.value=null;const e={include:w.value};await h.view("income_receipts",x.value,e).then(o=>{t.value=o,u("Loaded receipt successfully!")}).catch(o=>{console.error(o),u("Error loading receipt!")})}async function S(){c.value=null,h.view("income_receipts",t.value.id,{},{path:"template_data"}).then(e=>{c.value=e.receiptTemplate;const o=e.country,v=Object.assign({},e.billingContact,{country:o.countryName});R.value=Object.assign({},e,{billingContact:v}),u("Loaded template data successfully!")}).catch(e=>{console.error(e),u("Error loading template data!")})}function u(e){f.show(e),setTimeout(A,5e3)}function A(){f.hide()}const V=[{label:"Details",onchange:T},{label:"View Receipt PDF",onchange:S}];function M(e){V[e].onchange()}return G(async()=>{await T()}),(e,o)=>(n(),s("div",ee,[d("h2",te,m(a(q)),1),t.value?i("",!0):(n(),y(a(J),{key:0})),t.value?(n(),y(Y,{key:1,tabs:V,onTabChange:M},{"tab-0":B(()=>[d("div",ae,[(n(!0),s(D,null,E(a(F),(v,H)=>(n(),s("div",{key:H,class:"data-row"},[(n(!0),s(D,null,E(Object.keys(v),(l,K)=>(n(),s("div",{key:K,class:"data-field"},[d("div",ne,m(a(N)(l)),1),d("div",se,[a(g)(t.value)&&a(g)(t.value[l])?(n(),s("span",ce,m(a(O)(l,t.value,a(w),a(k))),1)):i("",!0),a(b)(t.value)||a(b)(t.value[l])?(n(),s("span",oe," --- no value --- ")):i("",!0)])]))),128))]))),128))])]),"tab-1":B(()=>[c.value?(n(),y(Z,{key:0,id:c.value.id,"template-type":"receipt_templates","content-markup":c.value.contentMarkup,"content-styles":c.value.contentStyles,data:R.value,disabled:!0},null,8,["id","content-markup","content-styles","data"])):i("",!0)]),_:1})):i("",!0)]))}},_e=P(re,[["__scopeId","data-v-73b11734"]]);export{_e as default};
