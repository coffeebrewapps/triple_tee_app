import{u as O,a as U}from"./dataAccess-23e2d087.js";import{_ as $,u as D,r as o,w as k,c,o as A,a as _,b as B,i as h,f as d,e as C,d as E,J as I,G as L,Y as F,S as G,p as M,g as T,h as Y}from"./index-812f3b98.js";const j=v=>(M("data-v-0a5e0f36"),v=v(),T(),v),z={class:"page-container"},q=j(()=>Y("h2",{class:"heading"},"Data Admin",-1)),H={__name:"DataAdmin",setup(v){const f=O(),p=U(),g=D(),a=o();k(a,async(e,t)=>{await x()});const m=o(!0),b=c(()=>`Data (Total: ${Object.keys(s.value).length})`),s=o([]),n=o(""),u=o(""),r=o(!1),S=[{value:"indexes",label:"Indexes"}],y=o([]),w=c(()=>S.concat(y.value));c(()=>`${f.baseUrl}/api/schemas`),c(()=>`${f.baseUrl}/api/indexes`),c(()=>`${f.baseUrl}/api/schemas/${a.value}/download`),c(()=>`${f.baseUrl}/api/schemas/${a.value}/upload`);async function V(){await p.schemas().then(e=>{y.value=e.map(t=>({value:t,label:t})),l("Loaded model class options successfully!")}).catch(e=>{r.value=!0,u.value=JSON.stringify(e,!1,4),l("Error loading model class options!")})}async function x(){s.value=[],a.value&&await p.list(a.value).then(e=>{s.value=e.data,n.value=JSON.stringify(s.value,!1,4),m.value=!1,l(`Fetched ${a.value} successfully!`)}).catch(e=>{r.value=!0,u.value=JSON.stringify(e,!1,4),l(`Error fetching ${a.value} data!`)})}async function N(){a.value==="indexes"?await p.upload("indexes",JSON.parse(n.value)).then(e=>{s.value=e.data,n.value=JSON.stringify(s.value,!1,4),m.value=!1,l("Updated indexes successfully!")}).catch(e=>{r.value=!0,u.value=JSON.stringify(e,!1,4),l("Error updating indexes!")}):await p.upload(a.value,JSON.parse(n.value)).then(e=>{s.value=e.data,n.value=JSON.stringify(s.value,!1,4),m.value=!1,l(`Updated ${a.value} data successfully!`)}).catch(e=>{r.value=!0,u.value=JSON.stringify(e,!1,4),l(`Error updating ${a.value} data!`)})}function l(e){g.show(e),setTimeout(J,5e3)}function J(){g.hide()}return A(async()=>{await V()}),(e,t)=>(_(),B("div",z,[q,h(d(I),{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=i=>a.value=i),label:"Model Class",name:"model-class",options:d(w),size:"lg"},null,8,["modelValue","options"]),h(d(L),{modelValue:n.value,"onUpdate:modelValue":t[1]||(t[1]=i=>n.value=i),label:d(b),rows:30,cols:150,disabled:m.value},null,8,["modelValue","label","disabled"]),u.value.length>0?(_(),C(d(F),{key:0,modelValue:r.value,"onUpdate:modelValue":t[2]||(t[2]=i=>r.value=i),title:"Error",class:"error-alert",content:u.value,width:800,height:500},null,8,["modelValue","content"])):E("",!0),h(d(G),{"button-type":"text",value:"Update",icon:"fa-solid fa-check",onClick:N})]))}},Q=$(H,[["__scopeId","data-v-0a5e0f36"]]);export{Q as default};
