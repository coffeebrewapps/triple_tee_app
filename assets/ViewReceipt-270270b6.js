import{_ as K,q as P,a as U,u as $,c as r,r as p,o as z,b as a,d as n,i as y,t as g,g as s,f as b,v as G,e as l,x as E,F as I,y as x}from"./index-2c32b8d5.js";import{u as J}from"./input-61224a77.js";import{u as Q}from"./validations-9a1af222.js";import{u as W}from"./utils-ea9a0c2c.js";import{T as X}from"./TabContainer-b757d0e9.js";import{T as Y}from"./TemplateEditor-33d1171e.js";const Z={class:"page-container"},ee={class:"heading"},te={key:0,class:"details-container"},ae={class:"field-label"},se={class:"field-value"},ne={key:0},ce={key:1},oe={__name:"ViewReceipt",setup(le){const C=P(),f=U(),{isEmpty:h,notEmpty:k}=Q(),{flashMessage:u}=$(),v=Object.assign({},C.currentRoute.value),L=r(()=>v.params.id),B=r(()=>v.query.invoiceId),F=r(()=>v.query.contactId),{fieldsLayout:j,generateDataFields:N}=W(),w=r(()=>N(B.value,F.value)),{inputLabel:O,inputValue:q,includeKeys:R}=J(w.value),t=p(),c=p(),T=p(),M=r(()=>t.value?`Receipt: ${t.value.receiptNumber}`:"Loading Receipt...");async function D(){t.value=null;const e={include:R.value};await f.view("income_receipts",L.value,e).then(o=>{t.value=o,u("Loaded receipt successfully!")}).catch(o=>{console.error(o),u("Error loading receipt!")})}async function S(){c.value=null,f.view("income_receipts",t.value.id,{},{path:"template_data"}).then(e=>{c.value=e.receiptTemplate;const o=e.country,_=e.logo,m=Object.assign({},e.billingContact,{country:o.countryName,logo:_.rawData});T.value=Object.assign({},e,{billingContact:m}),u("Loaded template data successfully!")}).catch(e=>{console.error(e),u("Error loading template data!")})}const i=p(0),V=[{label:"Details",onchange:D},{label:"View Receipt PDF",onchange:S}];async function A(e){await V[e].onchange(),i.value=e}return z(async()=>{await D()}),(e,o)=>(a(),n("div",Z,[y("h2",ee,g(s(M)),1),t.value?l("",!0):(a(),b(s(G),{key:0})),t.value?(a(),b(X,{key:1,"selected-tab":i.value,tabs:V,onTabChange:A},{"tab-0":E(()=>[i.value===0?(a(),n("div",te,[(a(!0),n(I,null,x(s(j),(_,m)=>(a(),n("div",{key:m,class:"data-row"},[(a(!0),n(I,null,x(Object.keys(_),(d,H)=>(a(),n("div",{key:H,class:"data-field"},[y("div",ae,g(s(O)(d)),1),y("div",se,[s(k)(t.value)&&s(k)(t.value[d])?(a(),n("span",ne,g(s(q)(d,t.value,s(R),s(w))),1)):l("",!0),s(h)(t.value)||s(h)(t.value[d])?(a(),n("span",ce," --- no value --- ")):l("",!0)])]))),128))]))),128))])):l("",!0)]),"tab-1":E(()=>[i.value===1&&c.value?(a(),b(Y,{key:0,id:c.value.id,"template-type":"receipt_templates","content-markup":c.value.contentMarkup,"content-styles":c.value.contentStyles,data:T.value,disabled:!0},null,8,["id","content-markup","content-styles","data"])):l("",!0)]),_:1},8,["selected-tab"])):l("",!0)]))}},_e=K(oe,[["__scopeId","data-v-25f0c501"]]);export{_e as default};
