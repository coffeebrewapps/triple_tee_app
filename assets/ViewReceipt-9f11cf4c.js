import{_ as P,n as U,a as $,u as z,m as G,c as r,r as p,o as J,b as s,d as n,j as y,t as g,g as a,f,s as Q,e as l,v as V,F as E,y as I}from"./index-522b32ec.js";import{u as W}from"./input-ae6e7048.js";import{u as X}from"./validations-9a1af222.js";import{u as Y}from"./utils-e5d368b1.js";import{T as Z}from"./TabContainer-e6b87ac2.js";import{T as ee}from"./TemplateEditor-5f1015af.js";const te={class:"page-container"},ae={class:"heading"},se={key:0,class:"details-container"},ne={class:"field-label"},ce={class:"field-value"},oe={key:0},le={key:1},re={__name:"ViewReceipt",setup(ue){const L=U(),b=$(),{isEmpty:h,notEmpty:k}=X(),{flashMessage:u}=z(),j=G(),v=Object.assign({},L.currentRoute.value),x=r(()=>v.params.id),B=r(()=>v.query.invoiceId),F=r(()=>v.query.contactId),{fieldsLayout:N,generateDataFields:S}=Y(),w=r(()=>S(B.value,F.value)),{inputLabel:O,inputValue:M,includeKeys:R}=W(w.value),t=p(),c=p(),T=p(),q=r(()=>t.value?`Receipt: ${t.value.receiptNumber}`:"Loading Receipt...");async function C(){t.value=null;const e={include:R.value};await b.view("income_receipts",x.value,e).then(o=>{t.value=o,u("Loaded receipt successfully!")}).catch(o=>{console.error(o),u("Error loading receipt!")})}async function A(){c.value=null,b.view("income_receipts",t.value.id,{},{path:"template_data"}).then(e=>{c.value=e.receiptTemplate;const o=e.country,m=e.logo,_=Object.assign({},e.billingContact,{country:o.countryName,logo:m.rawData});T.value=Object.assign({},e,{billingContact:_}),u("Loaded template data successfully!")}).catch(e=>{console.error(e),u("Error loading template data!")})}const i=p(0),D=[{label:"Details",onchange:C},{label:"View Receipt PDF",onchange:A}];async function H(e){await D[e].onchange(),i.value=e}return J(async()=>{await C()}),(e,o)=>(s(),n("div",te,[y("h2",ae,g(a(q)),1),t.value?l("",!0):(s(),f(a(Q),{key:0})),t.value?(s(),f(Z,{key:1,"selected-tab":i.value,tabs:D,onTabChange:H},{"tab-0":V(()=>[i.value===0?(s(),n("div",se,[(s(!0),n(E,null,I(a(N),(m,_)=>(s(),n("div",{key:_,class:"data-row"},[(s(!0),n(E,null,I(Object.keys(m),(d,K)=>(s(),n("div",{key:K,class:"data-field"},[y("div",ne,g(a(O)(d)),1),y("div",ce,[a(k)(t.value)&&a(k)(t.value[d])?(s(),n("span",oe,g(a(M)(d,t.value,a(R),a(w),a(j))),1)):l("",!0),a(h)(t.value)||a(h)(t.value[d])?(s(),n("span",le," --- no value --- ")):l("",!0)])]))),128))]))),128))])):l("",!0)]),"tab-1":V(()=>[i.value===1&&c.value?(s(),f(ee,{key:0,id:c.value.id,"template-type":"receipt_templates","content-markup":c.value.contentMarkup,"content-styles":c.value.contentStyles,data:T.value,disabled:!0},null,8,["id","content-markup","content-styles","data"])):l("",!0)]),_:1},8,["selected-tab"])):l("",!0)]))}},ye=P(re,[["__scopeId","data-v-f582d534"]]);export{ye as default};
