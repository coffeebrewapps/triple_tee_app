import{_ as A,j as Z,u as S,r as p,c as i,o as I,a as m,b as k,h as D,t as N,f as v,e as B,d as w}from"./index-cf9ea608.js";import{a as E}from"./dataAccess-238ee380.js";import{T as x}from"./TemplateEditor-6719ac54.js";import"./TabContainer-bd4cd668.js";const P={class:"page-container"},V={class:"heading"},R={__name:"PreviewTemplate",props:{disabled:{type:Boolean,default:!1}},setup(y){const T=Z(),c=E(),r=S(),o=p({}),d=Object.assign({},T.currentRoute.value),s=i(()=>d.params.id),a=i(()=>d.params.templateType),e=p(),f=i(()=>e.value?a.value==="invoice_templates"?`Invoice Template: ${e.value.name}`:`Receipt Template: ${e.value.name}`:"");async function b(t){const l=Object.assign({},e.value,{contentMarkup:t});await c.update(a.value,s.value,l).then(u=>{e.value=u,n("Updated markup successfully!")}).catch(u=>{n("Error updating markup!")})}async function h(t){const l=Object.assign({},e.value,{contentStyles:t});await c.update(a.value,s.value,l).then(u=>{e.value=u,n("Updated styles successfully!")}).catch(u=>{n("Error updating styles !")})}function _(t){o.value=t}function n(t){r.show(t),setTimeout(g,5e3)}function g(){r.hide()}async function C(){await c.view(a.value,s.value,{}).then(t=>{e.value=t}).catch(t=>{n("Error loading template!"),console.log(t)})}return I(async()=>{o.value={invoice:{invoiceNumber:2,invoiceDate:"2023-05-26T14:06:15.686Z",dueDate:"2023-06-25T14:06:15.686Z",totalAmount:574.98},invoiceLines:[{id:"1",description:"Requirements gathering",unit:"hour",unitCost:100,unitValue:2.06,subtotal:205.93,invoiceId:"1",createdAt:"2023-05-26T14:07:10.051Z",updatedAt:"2023-05-26T14:07:10.051Z"},{id:"2",description:"Implementation",unit:"hour",unitCost:85,unitValue:4.17,subtotal:354.05,invoiceId:"1",createdAt:"2023-05-26T14:07:10.055Z",updatedAt:"2023-05-26T14:07:10.055Z"},{id:"3",description:"GST",unit:"fixed",unitCost:15,unitValue:1,subtotal:15,invoiceId:"1",createdAt:"2023-05-26T14:07:10.057Z",updatedAt:"2023-05-26T14:07:10.057Z"}],invoiceConfig:{id:"1",invoiceCycleDurationValue:1,invoiceCycleDurationUnit:"month",dueDateCycleValue:30,dueDateCycleUnit:"day",paymentTerms:"Payment due to account 395-17573-542",tags:["1"],customFields:{},invoiceNumberSequenceId:"1",billingContactId:"1",invoiceTemplateId:"1",currencyId:"1",createdAt:"2023-05-26T06:32:33.830Z",updatedAt:"2023-05-26T06:32:33.830Z"},invoiceNumberSequence:{id:"1",name:"Company ABC Invoice Sequence",startingNumber:1,lastUsedNumber:1,incrementStep:1,prefix:"INV",suffix:"ABC",createdAt:"2023-05-26T06:30:04.445Z",updatedAt:"2023-05-26T06:30:04.445Z"},billingContact:{id:"1",name:"Company ABC",accountNumber:null,addressLine1:null,addressLine2:null,addressLine3:null,city:null,state:null,country:"SGP",postcode:null,contactNumber1:null,contactNumber2:null,contactNumber3:null,contactPerson1:null,contactPerson2:null,contactPerson3:null,contactEmail1:null,contactEmail2:null,contactEmail3:null,url1:null,url2:null,url3:null,logo:null,customFields:null,createdAt:"2023-05-26T06:30:24.570Z",updatedAt:"2023-05-26T06:30:24.570Z"},currency:{id:"1",code:"USD",symbol:"$",exchangeRate:1,effectiveStart:"2012-12-31T16:00:00.000Z",effectiveEnd:null,createdAt:"2023-05-26T06:29:49.052Z",updatedAt:"2023-05-26T06:29:49.052Z"}},await C()}),(t,l)=>(m(),k("div",P,[D("h2",V,N(v(f)),1),e.value?(m(),B(x,{key:0,"template-type":v(a),id:e.value.id,"content-markup":e.value.contentMarkup,"content-styles":e.value.contentStyles,data:o.value,disabled:y.disabled,onContentMarkupChange:b,onContentStylesChange:h,onDataChange:_},null,8,["template-type","id","content-markup","content-styles","data","disabled"])):w("",!0)]))}},L=A(R,[["__scopeId","data-v-6ba57246"]]);export{L as default};
