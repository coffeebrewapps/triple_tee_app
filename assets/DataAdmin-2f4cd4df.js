import{_ as U,u as $,b as D,a as J,r as o,w as k,c as d,o as A,d as _,e as B,k as h,h as r,g as C,f as E,s as I,l as L,X as M,M as j,p as F,i as T,j as X}from"./index-b3128bd9.js";const z=v=>(F("data-v-0a5e0f36"),v=v(),T(),v),q={class:"page-container"},G=z(()=>X("h2",{class:"heading"},"Data Admin",-1)),H={__name:"DataAdmin",setup(v){const f=$(),p=D(),g=J(),a=o();k(a,async(e,s)=>{await x()});const m=o(!0),b=d(()=>`Data (Total: ${Object.keys(t.value).length})`),t=o([]),n=o(""),u=o(""),c=o(!1),w=[{value:"indexes",label:"Indexes"}],y=o([]),S=d(()=>w.concat(y.value));d(()=>`${f.baseUrl}/api/schemas`),d(()=>`${f.baseUrl}/api/indexes`),d(()=>`${f.baseUrl}/api/schemas/${a.value}/download`),d(()=>`${f.baseUrl}/api/schemas/${a.value}/upload`);async function V(){await p.schemas().then(e=>{y.value=e.map(s=>({value:s,label:s})),l("Loaded model class options successfully!")}).catch(e=>{c.value=!0,u.value=JSON.stringify(e,!1,4),l("Error loading model class options!")})}async function x(){t.value=[],a.value&&await p.list(a.value).then(e=>{t.value=e.data,n.value=JSON.stringify(t.value,!1,4),m.value=!1,l(`Fetched ${a.value} successfully!`)}).catch(e=>{c.value=!0,u.value=JSON.stringify(e,!1,4),l(`Error fetching ${a.value} data!`)})}async function N(){a.value==="indexes"?await p.upload("indexes",JSON.parse(n.value)).then(e=>{t.value=e.data,n.value=JSON.stringify(t.value,!1,4),m.value=!1,l("Updated indexes successfully!")}).catch(e=>{c.value=!0,u.value=JSON.stringify(e,!1,4),l("Error updating indexes!")}):await p.upload(a.value,JSON.parse(n.value)).then(e=>{t.value=e.data,n.value=JSON.stringify(t.value,!1,4),m.value=!1,l(`Updated ${a.value} data successfully!`)}).catch(e=>{c.value=!0,u.value=JSON.stringify(e,!1,4),l(`Error updating ${a.value} data!`)})}function l(e){g.show(e),setTimeout(O,5e3)}function O(){g.hide()}return A(async()=>{await V()}),(e,s)=>(_(),B("div",q,[G,h(r(I),{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=i=>a.value=i),label:"Model Class",name:"model-class",options:r(S),size:"lg"},null,8,["modelValue","options"]),h(r(L),{modelValue:n.value,"onUpdate:modelValue":s[1]||(s[1]=i=>n.value=i),label:r(b),rows:30,cols:150,disabled:m.value},null,8,["modelValue","label","disabled"]),u.value.length>0?(_(),C(r(M),{key:0,modelValue:c.value,"onUpdate:modelValue":s[2]||(s[2]=i=>c.value=i),title:"Error",class:"error-alert",content:u.value,width:800,height:500},null,8,["modelValue","content"])):E("",!0),h(r(j),{"button-type":"text",value:"Update",icon:"fa-solid fa-check",onClick:N})]))}},P=U(H,[["__scopeId","data-v-0a5e0f36"]]);export{P as default};
