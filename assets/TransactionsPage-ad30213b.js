import{D as B}from"./DataPage-4999849a.js";import{n as $,b as F,u as L,r as h,o as d,c as k,k as N,q as b,s,t as r,j as u,g as y,e as w,f as z,V as E,A as H}from"./index-b3ed4318.js";import"./input-811f8f86.js";import"./errors-53bc63a8.js";import"./DataForm-ebf3e12e.js";const P={class:"page-container"},j={key:0},Q={__name:"TransactionsPage",setup(q){const n=$().getSystemConfigs(),m=F(()=>n.includes.baseCurrencyId[n.baseCurrencyId]),{formatDate:p}=H(),{flashMessage:I}=L(),S=[{type:"lg",transactionDate:"md"},{description:"lg"},{currencyId:"md",amount:"md",homeCurrencyAmount:"md"},{tags:"lg"},{associatedTransactionId:"lg"}];function c(e){return e.id}function f(e){return`${e.category}:${e.name}`}function g(e){const l=p(e.effectiveStart,n.timezone),t=p(e.effectiveEnd,n.timezone);let a=`${e.code}`;return a=a.concat(` (${l}`),t?a=a.concat(` - ${t})`):a=a.concat(" - present)"),a}function v(e){return e.description}const T=[{key:"id",type:"text",label:"ID",listable:!0,viewable:!1,creatable:!1,updatable:!1,sortable:!0},{key:"type",type:"enum",label:"Type",listable:!0,viewable:!0,creatable:!0,updatable:!1,filterable:!0},{key:"transactionDate",type:"date",label:"Transaction Date",listable:!0,viewable:!0,creatable:!0,updatable:!0,filterable:!0,sortable:!0},{key:"description",type:"text",label:"Description",listable:!0,viewable:!0,creatable:!0,updatable:!0},{key:"amount",type:"number",label:"Amount",listable:!0,viewable:!0,creatable:!0,updatable:!0},{key:"homeCurrencyAmount",type:"number",label:"Home Currency Amount",listable:!1,viewable:!0,creatable:!0,updatable:!0},{key:"tags",type:"multiSelect",label:"Tags",reference:{label:f},listable:!0,viewable:!0,creatable:!0,updatable:!0,filterable:!0,options:{server:!0,pagination:!0,modelClass:"tags",value:c,label:f}},{key:"currencyId",type:"singleSelect",label:"Currency",reference:{label:g},listable:!0,viewable:!0,creatable:!0,updatable:!0,filterable:!0,options:{server:!0,pagination:!0,modelClass:"currencies",value:c,label:g}},{key:"associatedTransactionId",type:"singleSelect",label:"Associated Transaction",reference:{label:v},listable:!1,viewable:!0,creatable:!0,updatable:!0,options:{server:!0,pagination:!0,modelClass:"transactions",value:c,label:v}}],_={initData:{type:null,currencyId:null,tags:[],transactionDate:{startDate:null,endDate:null}},layout:[{type:"md",currencyId:"md",tags:"md"},{transactionDate:"md"}]},x={row:{reverse:{name:"Reverse",icon:"fa-solid fa-rotate-left",click:async function(e,l){await V(e)}}}},A={oneline:!0,showHeader:!1,highlightField:"description"},i=h(),o=h(!1);async function V(e){i.value=e,o.value=!0}function R(){I("Reversed transaction successfully!"),D()}function D(){o.value=!1}return(e,l)=>(d(),k("div",P,[N(B,{"model-class":"transactions","data-type":"Transactions",fullscreen:!0,"fields-layout":S,"data-fields":T,filters:_,actions:x,"table-style":A},{["highlight.description"]:b(({formattedValue:t})=>[s(r(t),1)]),["data-col.transactionDate"]:b(({formattedValue:t})=>[s(" Transacted on "),u("strong",null,r(t),1)]),["data-col.amount"]:b(({row:t,formattedValue:a,inputValue:C})=>[u("strong",null,r(C("type",t)),1),s(" amount "),u("strong",null,r(t.includes.currencyId[t.currencyId].code)+r(a),1),y(m).id!==t.currencyId?(d(),k("span",j,[s(" ("),u("strong",null,r(y(m).code)+r(C("homeCurrencyAmount",t)),1),s(") ")])):w("",!0)]),_:2},1024),i.value?(d(),z(y(E),{key:0,modelValue:o.value,"onUpdate:modelValue":l[0]||(l[0]=t=>o.value=t),title:"Reverse Transaction","primary-text":"Are you sure you want to reverse this transaction?","secondary-text":i.value.description,width:500,height:350,class:"reverse-dialog",onConfirm:R,onCancel:D},null,8,["modelValue","secondary-text"])):w("",!0)]))}};export{Q as default};
